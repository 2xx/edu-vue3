import{h as Y,j as S,n as X,_ as Q,w as oe,B as He,I as K,ao as de,m as je,A as le,am as ee,a6 as ze,aV as Ke,G as q,aw as qe,aQ as We,O as G,D as Xe,aW as Ge,aX as Ye,aY as Te,N as Je,aP as Ve,aE as Re,J as fe,aU as Qe,aZ as Ze,a_ as xe,T as et,a$ as tt,b0 as st}from"./index-454643d3.js";import{i as x,E as at}from"./el-input-c28d0f82.js";import{C as Ue,I as ce,U as re,a as nt,d as me,t as he}from"./users-4d3745c7.js";import{u as ke}from"./index-309dffdd.js";import{d as O,V as C,o as y,Y as _,a5 as v,u as e,a2 as F,a9 as $,a8 as J,K as $e,N as rt,M as ve,X as ot,q as lt,a4 as we,a as M,w as R,c as U,b as ye,ah as De,Z as B,aa as Le,ad as Ee,a6 as te,i as it,a0 as L,F as ut,ar as dt,j as ct,Q as pt,ac as be,ag as ft,a1 as mt,ai as vt,ap as _e,a3 as Ne}from"./runtime-core.esm-bundler-d5958d54.js";import{v as Se}from"./index-9231dd87.js";const Oe=Symbol("uploadContextKey"),yt=Y({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:S(String),default:"solid"}}),bt=O({name:"ElDivider"}),gt=O({...bt,props:yt,setup(s){const r=s,a=X("divider"),t=C(()=>a.cssVar({"border-style":r.borderStyle}));return(i,m)=>(y(),_("div",{class:v([e(a).b(),e(a).m(i.direction)]),style:J(e(t)),role:"separator"},[i.$slots.default&&i.direction!=="vertical"?(y(),_("div",{key:0,class:v([e(a).e("text"),e(a).is(i.contentPosition)])},[F(i.$slots,"default")],2)):$("v-if",!0)],6))}});var ht=Q(gt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const kt=oe(ht),$t=Y({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:He,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:s=>s===null||K(s)||["min","max"].includes(s),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:s=>s>=0&&s===Number.parseInt(`${s}`,10)},validateEvent:{type:Boolean,default:!0}}),wt={[Ue]:(s,r)=>r!==s,blur:s=>s instanceof FocusEvent,focus:s=>s instanceof FocusEvent,[ce]:s=>K(s)||x(s),[re]:s=>K(s)||x(s)},Et=["aria-label","onKeydown"],_t=["aria-label","onKeydown"],Nt=O({name:"ElInputNumber"}),St=O({...Nt,props:$t,emits:wt,setup(s,{expose:r,emit:a}){const t=s,{t:i}=ke(),m=X("input-number"),g=$e(),d=rt({currentValue:t.modelValue,userInput:null}),{formItem:w}=nt(),b=C(()=>K(t.modelValue)&&t.modelValue<=t.min),P=C(()=>K(t.modelValue)&&t.modelValue>=t.max),E=C(()=>{const o=c(t.step);return de(t.precision)?Math.max(c(t.modelValue),o):(o>t.precision,t.precision)}),l=C(()=>t.controls&&t.controlsPosition==="right"),f=je(),n=le(),h=C(()=>{if(d.userInput!==null)return d.userInput;let o=d.currentValue;if(x(o))return"";if(K(o)){if(Number.isNaN(o))return"";de(t.precision)||(o=o.toFixed(t.precision))}return o}),k=(o,p)=>{if(de(p)&&(p=E.value),p===0)return Math.round(o);let N=String(o);const D=N.indexOf(".");if(D===-1||!N.replace(".","").split("")[D+p])return o;const ie=N.length;return N.charAt(ie-1)==="5"&&(N=`${N.slice(0,Math.max(0,ie-1))}6`),Number.parseFloat(Number(N).toFixed(p))},c=o=>{if(x(o))return 0;const p=o.toString(),N=p.indexOf(".");let D=0;return N!==-1&&(D=p.length-N-1),D},j=(o,p=1)=>K(o)?k(o+t.step*p):d.currentValue,u=()=>{if(t.readonly||n.value||P.value)return;const o=Number(h.value)||0,p=j(o);I(p),a(ce,d.currentValue)},T=()=>{if(t.readonly||n.value||b.value)return;const o=Number(h.value)||0,p=j(o,-1);I(p),a(ce,d.currentValue)},A=(o,p)=>{const{max:N,min:D,step:V,precision:W,stepStrictly:ie,valueOnClear:ue}=t;let H=Number(o);if(x(o)||Number.isNaN(H))return null;if(o===""){if(ue===null)return null;H=ye(ue)?{min:D,max:N}[ue]:ue}return ie&&(H=k(Math.round(H/V)*V,W)),de(W)||(H=k(H,W)),(H>N||H<D)&&(H=H>N?N:D,p&&a(re,H)),H},I=(o,p=!0)=>{var N;const D=d.currentValue,V=A(o);if(D!==V){if(!p){a(re,V);return}d.userInput=null,a(re,V),a(Ue,V,D),t.validateEvent&&((N=w==null?void 0:w.validate)==null||N.call(w,"change").catch(W=>me())),d.currentValue=V}},z=o=>{d.userInput=o;const p=o===""?null:Number(o);a(ce,p),I(p,!1)},pe=o=>{const p=o!==""?Number(o):"";(K(p)&&!Number.isNaN(p)||o==="")&&I(p),d.userInput=null},se=()=>{var o,p;(p=(o=g.value)==null?void 0:o.focus)==null||p.call(o)},ae=()=>{var o,p;(p=(o=g.value)==null?void 0:o.blur)==null||p.call(o)},ne=o=>{a("focus",o)},Z=o=>{var p;a("blur",o),t.validateEvent&&((p=w==null?void 0:w.validate)==null||p.call(w,"blur").catch(N=>me()))};return ve(()=>t.modelValue,o=>{const p=A(d.userInput),N=A(o,!0);!K(p)&&(!p||p!==N)&&(d.currentValue=N,d.userInput=null)},{immediate:!0}),ot(()=>{var o;const{min:p,max:N,modelValue:D}=t,V=(o=g.value)==null?void 0:o.input;if(V.setAttribute("role","spinbutton"),Number.isFinite(N)?V.setAttribute("aria-valuemax",String(N)):V.removeAttribute("aria-valuemax"),Number.isFinite(p)?V.setAttribute("aria-valuemin",String(p)):V.removeAttribute("aria-valuemin"),V.setAttribute("aria-valuenow",String(d.currentValue)),V.setAttribute("aria-disabled",String(n.value)),!K(D)&&D!=null){let W=Number(D);Number.isNaN(W)&&(W=null),a(re,W)}}),lt(()=>{var o;const p=(o=g.value)==null?void 0:o.input;p==null||p.setAttribute("aria-valuenow",`${d.currentValue}`)}),r({focus:se,blur:ae}),(o,p)=>(y(),_("div",{class:v([e(m).b(),e(m).m(e(f)),e(m).is("disabled",e(n)),e(m).is("without-controls",!o.controls),e(m).is("controls-right",e(l))]),onDragstart:p[0]||(p[0]=G(()=>{},["prevent"]))},[o.controls?we((y(),_("span",{key:0,role:"button","aria-label":e(i)("el.inputNumber.decrease"),class:v([e(m).e("decrease"),e(m).is("disabled",e(b))]),onKeydown:ee(T,["enter"])},[M(e(q),null,{default:R(()=>[e(l)?(y(),U(e(ze),{key:0})):(y(),U(e(Ke),{key:1}))]),_:1})],42,Et)),[[e(Se),T]]):$("v-if",!0),o.controls?we((y(),_("span",{key:1,role:"button","aria-label":e(i)("el.inputNumber.increase"),class:v([e(m).e("increase"),e(m).is("disabled",e(P))]),onKeydown:ee(u,["enter"])},[M(e(q),null,{default:R(()=>[e(l)?(y(),U(e(qe),{key:0})):(y(),U(e(We),{key:1}))]),_:1})],42,_t)),[[e(Se),u]]):$("v-if",!0),M(e(at),{id:o.id,ref_key:"input",ref:g,type:"number",step:o.step,"model-value":e(h),placeholder:o.placeholder,readonly:o.readonly,disabled:e(n),size:e(f),max:o.max,min:o.min,name:o.name,label:o.label,"validate-event":!1,onKeydown:[ee(G(u,["prevent"]),["up"]),ee(G(T,["prevent"]),["down"])],onBlur:Z,onFocus:ne,onInput:z,onChange:pe},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var Pt=Q(St,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Ps=oe(Pt),Ct=Y({icon:{type:Xe,default:()=>Ge},title:String,content:{type:String,default:""}}),Ft={back:()=>!0},It=["aria-label"],Tt=O({name:"ElPageHeader"}),Vt=O({...Tt,props:Ct,emits:Ft,setup(s,{emit:r}){const a=De(),{t}=ke(),i=X("page-header"),m=C(()=>[i.b(),{[i.m("has-breadcrumb")]:!!a.breadcrumb,[i.m("has-extra")]:!!a.extra,[i.is("contentful")]:!!a.default}]);function g(){r("back")}return(d,w)=>(y(),_("div",{class:v(e(m))},[d.$slots.breadcrumb?(y(),_("div",{key:0,class:v(e(i).e("breadcrumb"))},[F(d.$slots,"breadcrumb")],2)):$("v-if",!0),B("div",{class:v(e(i).e("header"))},[B("div",{class:v(e(i).e("left"))},[B("div",{class:v(e(i).e("back")),role:"button",tabindex:"0",onClick:g},[d.icon||d.$slots.icon?(y(),_("div",{key:0,"aria-label":d.title||e(t)("el.pageHeader.title"),class:v(e(i).e("icon"))},[F(d.$slots,"icon",{},()=>[d.icon?(y(),U(e(q),{key:0},{default:R(()=>[(y(),U(Le(d.icon)))]),_:1})):$("v-if",!0)])],10,It)):$("v-if",!0),B("div",{class:v(e(i).e("title"))},[F(d.$slots,"title",{},()=>[Ee(te(d.title||e(t)("el.pageHeader.title")),1)])],2)],2),M(e(kt),{direction:"vertical"}),B("div",{class:v(e(i).e("content"))},[F(d.$slots,"content",{},()=>[Ee(te(d.content),1)])],2)],2),d.$slots.extra?(y(),_("div",{key:0,class:v(e(i).e("extra"))},[F(d.$slots,"extra")],2)):$("v-if",!0)],2),d.$slots.default?(y(),_("div",{key:1,class:v(e(i).e("main"))},[F(d.$slots,"default")],2)):$("v-if",!0)],2))}});var Rt=Q(Vt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const Cs=oe(Rt),Ut=Y({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:s=>s>=0&&s<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:S(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:S([String,Array,Function]),default:""},format:{type:S(Function),default:s=>`${s}%`}}),Dt=["aria-valuenow"],Lt={viewBox:"0 0 100 100"},Ot=["d","stroke","stroke-width"],Bt=["d","stroke","opacity","stroke-linecap","stroke-width"],At={key:0},Mt=O({name:"ElProgress"}),Ht=O({...Mt,props:Ut,setup(s){const r=s,a={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},t=X("progress"),i=C(()=>({width:`${r.percentage}%`,animationDuration:`${r.duration}s`,backgroundColor:j(r.percentage)})),m=C(()=>(r.strokeWidth/r.width*100).toFixed(1)),g=C(()=>["circle","dashboard"].includes(r.type)?Number.parseInt(`${50-Number.parseFloat(m.value)/2}`,10):0),d=C(()=>{const u=g.value,T=r.type==="dashboard";return`
          M 50 50
          m 0 ${T?"":"-"}${u}
          a ${u} ${u} 0 1 1 0 ${T?"-":""}${u*2}
          a ${u} ${u} 0 1 1 0 ${T?"":"-"}${u*2}
          `}),w=C(()=>2*Math.PI*g.value),b=C(()=>r.type==="dashboard"?.75:1),P=C(()=>`${-1*w.value*(1-b.value)/2}px`),E=C(()=>({strokeDasharray:`${w.value*b.value}px, ${w.value}px`,strokeDashoffset:P.value})),l=C(()=>({strokeDasharray:`${w.value*b.value*(r.percentage/100)}px, ${w.value}px`,strokeDashoffset:P.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),f=C(()=>{let u;return r.color?u=j(r.percentage):u=a[r.status]||a.default,u}),n=C(()=>r.status==="warning"?Ye:r.type==="line"?r.status==="success"?Te:Je:r.status==="success"?Ve:Re),h=C(()=>r.type==="line"?12+r.strokeWidth*.4:r.width*.111111+2),k=C(()=>r.format(r.percentage));function c(u){const T=100/u.length;return u.map((I,z)=>ye(I)?{color:I,percentage:(z+1)*T}:I).sort((I,z)=>I.percentage-z.percentage)}const j=u=>{var T;const{color:A}=r;if(it(A))return A(u);if(ye(A))return A;{const I=c(A);for(const z of I)if(z.percentage>u)return z.color;return(T=I[I.length-1])==null?void 0:T.color}};return(u,T)=>(y(),_("div",{class:v([e(t).b(),e(t).m(u.type),e(t).is(u.status),{[e(t).m("without-text")]:!u.showText,[e(t).m("text-inside")]:u.textInside}]),role:"progressbar","aria-valuenow":u.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[u.type==="line"?(y(),_("div",{key:0,class:v(e(t).b("bar"))},[B("div",{class:v(e(t).be("bar","outer")),style:J({height:`${u.strokeWidth}px`})},[B("div",{class:v([e(t).be("bar","inner"),{[e(t).bem("bar","inner","indeterminate")]:u.indeterminate}]),style:J(e(i))},[(u.showText||u.$slots.default)&&u.textInside?(y(),_("div",{key:0,class:v(e(t).be("bar","innerText"))},[F(u.$slots,"default",{percentage:u.percentage},()=>[B("span",null,te(e(k)),1)])],2)):$("v-if",!0)],6)],6)],2)):(y(),_("div",{key:1,class:v(e(t).b("circle")),style:J({height:`${u.width}px`,width:`${u.width}px`})},[(y(),_("svg",Lt,[B("path",{class:v(e(t).be("circle","track")),d:e(d),stroke:`var(${e(t).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":e(m),fill:"none",style:J(e(E))},null,14,Ot),B("path",{class:v(e(t).be("circle","path")),d:e(d),stroke:e(f),fill:"none",opacity:u.percentage?1:0,"stroke-linecap":u.strokeLinecap,"stroke-width":e(m),style:J(e(l))},null,14,Bt)]))],6)),(u.showText||u.$slots.default)&&!u.textInside?(y(),_("div",{key:2,class:v(e(t).e("text")),style:J({fontSize:`${e(h)}px`})},[F(u.$slots,"default",{percentage:u.percentage},()=>[u.status?(y(),U(e(q),{key:1},{default:R(()=>[(y(),U(Le(e(n))))]),_:1})):(y(),_("span",At,te(e(k)),1))])],6)):$("v-if",!0)],10,Dt))}});var jt=Q(Ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const zt=oe(jt),Kt="ElUpload";class qt extends Error{constructor(r,a,t,i){super(r),this.name="UploadAjaxError",this.status=a,this.method=t,this.url=i}}function Pe(s,r,a){let t;return a.response?t=`${a.response.error||a.response}`:a.responseText?t=`${a.responseText}`:t=`fail to ${r.method} ${s} ${a.status}`,new qt(t,a.status,r.method,s)}function Wt(s){const r=s.responseText||s.response;if(!r)return r;try{return JSON.parse(r)}catch{return r}}const Xt=s=>{typeof XMLHttpRequest>"u"&&he(Kt,"XMLHttpRequest is undefined");const r=new XMLHttpRequest,a=s.action;r.upload&&r.upload.addEventListener("progress",m=>{const g=m;g.percent=m.total>0?m.loaded/m.total*100:0,s.onProgress(g)});const t=new FormData;if(s.data)for(const[m,g]of Object.entries(s.data))Array.isArray(g)?t.append(m,...g):t.append(m,g);t.append(s.filename,s.file,s.file.name),r.addEventListener("error",()=>{s.onError(Pe(a,s,r))}),r.addEventListener("load",()=>{if(r.status<200||r.status>=300)return s.onError(Pe(a,s,r));s.onSuccess(Wt(r))}),r.open(s.method,a,!0),s.withCredentials&&"withCredentials"in r&&(r.withCredentials=!0);const i=s.headers||{};if(i instanceof Headers)i.forEach((m,g)=>r.setRequestHeader(g,m));else for(const[m,g]of Object.entries(i))x(g)||r.setRequestHeader(m,String(g));return r.send(t),r},Be=["text","picture","picture-card"];let Gt=1;const ge=()=>Date.now()+Gt++,Ae=Y({action:{type:String,default:"#"},headers:{type:S(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>fe({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:S(Array),default:()=>fe([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Be,default:"text"},httpRequest:{type:S(Function),default:Xt},disabled:Boolean,limit:Number}),Yt=Y({...Ae,beforeUpload:{type:S(Function),default:L},beforeRemove:{type:S(Function)},onRemove:{type:S(Function),default:L},onChange:{type:S(Function),default:L},onPreview:{type:S(Function),default:L},onSuccess:{type:S(Function),default:L},onProgress:{type:S(Function),default:L},onError:{type:S(Function),default:L},onExceed:{type:S(Function),default:L}}),Jt=Y({files:{type:S(Array),default:()=>fe([])},disabled:{type:Boolean,default:!1},handlePreview:{type:S(Function),default:L},listType:{type:String,values:Be,default:"text"}}),Qt={remove:s=>!!s},Zt=["onKeydown"],xt=["src"],es=["onClick"],ts=["onClick"],ss=["onClick"],as=O({name:"ElUploadList"}),ns=O({...as,props:Jt,emits:Qt,setup(s,{emit:r}){const{t:a}=ke(),t=X("upload"),i=X("icon"),m=X("list"),g=le(),d=$e(!1),w=b=>{r("remove",b)};return(b,P)=>(y(),U(et,{tag:"ul",class:v([e(t).b("list"),e(t).bm("list",b.listType),e(t).is("disabled",e(g))]),name:e(m).b()},{default:R(()=>[(y(!0),_(ut,null,dt(b.files,E=>(y(),_("li",{key:E.uid||E.name,class:v([e(t).be("list","item"),e(t).is(E.status),{focusing:d.value}]),tabindex:"0",onKeydown:ee(l=>!e(g)&&w(E),["delete"]),onFocus:P[0]||(P[0]=l=>d.value=!0),onBlur:P[1]||(P[1]=l=>d.value=!1),onClick:P[2]||(P[2]=l=>d.value=!1)},[F(b.$slots,"default",{file:E},()=>[b.listType==="picture"||E.status!=="uploading"&&b.listType==="picture-card"?(y(),_("img",{key:0,class:v(e(t).be("list","item-thumbnail")),src:E.url,alt:""},null,10,xt)):$("v-if",!0),E.status==="uploading"||b.listType!=="picture-card"?(y(),_("div",{key:1,class:v(e(t).be("list","item-info"))},[B("a",{class:v(e(t).be("list","item-name")),onClick:G(l=>b.handlePreview(E),["prevent"])},[M(e(q),{class:v(e(i).m("document"))},{default:R(()=>[M(e(Qe))]),_:1},8,["class"]),B("span",{class:v(e(t).be("list","item-file-name"))},te(E.name),3)],10,es),E.status==="uploading"?(y(),U(e(zt),{key:0,type:b.listType==="picture-card"?"circle":"line","stroke-width":b.listType==="picture-card"?6:2,percentage:Number(E.percentage),style:J(b.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):$("v-if",!0)],2)):$("v-if",!0),B("label",{class:v(e(t).be("list","item-status-label"))},[b.listType==="text"?(y(),U(e(q),{key:0,class:v([e(i).m("upload-success"),e(i).m("circle-check")])},{default:R(()=>[M(e(Te))]),_:1},8,["class"])):["picture-card","picture"].includes(b.listType)?(y(),U(e(q),{key:1,class:v([e(i).m("upload-success"),e(i).m("check")])},{default:R(()=>[M(e(Ve))]),_:1},8,["class"])):$("v-if",!0)],2),e(g)?$("v-if",!0):(y(),U(e(q),{key:2,class:v(e(i).m("close")),onClick:l=>w(E)},{default:R(()=>[M(e(Re))]),_:2},1032,["class","onClick"])),$(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),$(" This is a bug which needs to be fixed "),$(" TODO: Fix the incorrect navigation interaction "),e(g)?$("v-if",!0):(y(),_("i",{key:3,class:v(e(i).m("close-tip"))},te(e(a)("el.upload.deleteTip")),3)),b.listType==="picture-card"?(y(),_("span",{key:4,class:v(e(t).be("list","item-actions"))},[B("span",{class:v(e(t).be("list","item-preview")),onClick:l=>b.handlePreview(E)},[M(e(q),{class:v(e(i).m("zoom-in"))},{default:R(()=>[M(e(Ze))]),_:1},8,["class"])],10,ts),e(g)?$("v-if",!0):(y(),_("span",{key:0,class:v(e(t).be("list","item-delete")),onClick:l=>w(E)},[M(e(q),{class:v(e(i).m("delete"))},{default:R(()=>[M(e(xe))]),_:1},8,["class"])],10,ss))],2)):$("v-if",!0)])],42,Zt))),128)),F(b.$slots,"append")]),_:3},8,["class","name"]))}});var Ce=Q(ns,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const rs=Y({disabled:{type:Boolean,default:!1}}),os={file:s=>ct(s)},ls=["onDrop","onDragover"],Me="ElUploadDrag",is=O({name:Me}),us=O({...is,props:rs,emits:os,setup(s,{emit:r}){const a=pt(Oe);a||he(Me,"usage: <el-upload><el-upload-dragger /></el-upload>");const t=X("upload"),i=$e(!1),m=le(),g=w=>{if(m.value)return;i.value=!1;const b=Array.from(w.dataTransfer.files),P=a.accept.value;if(!P){r("file",b);return}const E=b.filter(l=>{const{type:f,name:n}=l,h=n.includes(".")?`.${n.split(".").pop()}`:"",k=f.replace(/\/.*$/,"");return P.split(",").map(c=>c.trim()).filter(c=>c).some(c=>c.startsWith(".")?h===c:/\/\*$/.test(c)?k===c.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(c)?f===c:!1)});r("file",E)},d=()=>{m.value||(i.value=!0)};return(w,b)=>(y(),_("div",{class:v([e(t).b("dragger"),e(t).is("dragover",i.value)]),onDrop:G(g,["prevent"]),onDragover:G(d,["prevent"]),onDragleave:b[0]||(b[0]=G(P=>i.value=!1,["prevent"]))},[F(w.$slots,"default")],42,ls))}});var ds=Q(us,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const cs=Y({...Ae,beforeUpload:{type:S(Function),default:L},onRemove:{type:S(Function),default:L},onStart:{type:S(Function),default:L},onSuccess:{type:S(Function),default:L},onProgress:{type:S(Function),default:L},onError:{type:S(Function),default:L},onExceed:{type:S(Function),default:L}}),ps=["onKeydown"],fs=["name","multiple","accept"],ms=O({name:"ElUploadContent",inheritAttrs:!1}),vs=O({...ms,props:cs,setup(s,{expose:r}){const a=s,t=X("upload"),i=le(),m=be({}),g=be(),d=n=>{if(n.length===0)return;const{autoUpload:h,limit:k,fileList:c,multiple:j,onStart:u,onExceed:T}=a;if(k&&c.length+n.length>k){T(n,c);return}j||(n=n.slice(0,1));for(const A of n){const I=A;I.uid=ge(),u(I),h&&w(I)}},w=async n=>{if(g.value.value="",!a.beforeUpload)return b(n);let h;try{h=await a.beforeUpload(n)}catch{h=!1}if(h===!1){a.onRemove(n);return}let k=n;h instanceof Blob&&(h instanceof File?k=h:k=new File([h],n.name,{type:n.type})),b(Object.assign(k,{uid:n.uid}))},b=n=>{const{headers:h,data:k,method:c,withCredentials:j,name:u,action:T,onProgress:A,onSuccess:I,onError:z,httpRequest:pe}=a,{uid:se}=n,ae={headers:h||{},withCredentials:j,file:n,data:k,method:c,filename:u,action:T,onProgress:Z=>{A(Z,n)},onSuccess:Z=>{I(Z,n),delete m.value[se]},onError:Z=>{z(Z,n),delete m.value[se]}},ne=pe(ae);m.value[se]=ne,ne instanceof Promise&&ne.then(ae.onSuccess,ae.onError)},P=n=>{const h=n.target.files;h&&d(Array.from(h))},E=()=>{i.value||(g.value.value="",g.value.click())},l=()=>{E()};return r({abort:n=>{tt(m.value).filter(n?([k])=>String(n.uid)===k:()=>!0).forEach(([k,c])=>{c instanceof XMLHttpRequest&&c.abort(),delete m.value[k]})},upload:w}),(n,h)=>(y(),_("div",{class:v([e(t).b(),e(t).m(n.listType),e(t).is("drag",n.drag)]),tabindex:"0",onClick:E,onKeydown:ee(G(l,["self"]),["enter","space"])},[n.drag?(y(),U(ds,{key:0,disabled:e(i),onFile:d},{default:R(()=>[F(n.$slots,"default")]),_:3},8,["disabled"])):F(n.$slots,"default",{key:1}),B("input",{ref_key:"inputRef",ref:g,class:v(e(t).e("input")),name:n.name,multiple:n.multiple,accept:n.accept,type:"file",onChange:P,onClick:h[0]||(h[0]=G(()=>{},["stop"]))},null,42,fs)],42,ps))}});var Fe=Q(vs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const Ie="ElUpload",ys=s=>{var r;(r=s.url)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(s.url)},bs=(s,r)=>{const a=st(s,"fileList",void 0,{passive:!0}),t=l=>a.value.find(f=>f.uid===l.uid);function i(l){var f;(f=r.value)==null||f.abort(l)}function m(l=["ready","uploading","success","fail"]){a.value=a.value.filter(f=>!l.includes(f.status))}const g=(l,f)=>{const n=t(f);n&&(console.error(l),n.status="fail",a.value.splice(a.value.indexOf(n),1),s.onError(l,n,a.value),s.onChange(n,a.value))},d=(l,f)=>{const n=t(f);n&&(s.onProgress(l,n,a.value),n.status="uploading",n.percentage=Math.round(l.percent))},w=(l,f)=>{const n=t(f);n&&(n.status="success",n.response=l,s.onSuccess(l,n,a.value),s.onChange(n,a.value))},b=l=>{x(l.uid)&&(l.uid=ge());const f={name:l.name,percentage:0,status:"ready",size:l.size,raw:l,uid:l.uid};if(s.listType==="picture-card"||s.listType==="picture")try{f.url=URL.createObjectURL(l)}catch(n){me(Ie,n.message),s.onError(n,f,a.value)}a.value=[...a.value,f],s.onChange(f,a.value)},P=async l=>{const f=l instanceof File?t(l):l;f||he(Ie,"file to be removed not found");const n=h=>{i(h);const k=a.value;k.splice(k.indexOf(h),1),s.onRemove(h,k),ys(h)};s.beforeRemove?await s.beforeRemove(f,a.value)!==!1&&n(f):n(f)};function E(){a.value.filter(({status:l})=>l==="ready").forEach(({raw:l})=>{var f;return l&&((f=r.value)==null?void 0:f.upload(l))})}return ve(()=>s.listType,l=>{l!=="picture-card"&&l!=="picture"||(a.value=a.value.map(f=>{const{raw:n,url:h}=f;if(!h&&n)try{f.url=URL.createObjectURL(n)}catch(k){s.onError(k,f,a.value)}return f}))}),ve(a,l=>{for(const f of l)f.uid||(f.uid=ge()),f.status||(f.status="success")},{immediate:!0,deep:!0}),{uploadFiles:a,abort:i,clearFiles:m,handleError:g,handleProgress:d,handleStart:b,handleSuccess:w,handleRemove:P,submit:E}},gs=O({name:"ElUpload"}),hs=O({...gs,props:Yt,setup(s,{expose:r}){const a=s,t=De(),i=le(),m=be(),{abort:g,submit:d,clearFiles:w,uploadFiles:b,handleStart:P,handleError:E,handleRemove:l,handleSuccess:f,handleProgress:n}=bs(a,m),h=C(()=>a.listType==="picture-card"),k=C(()=>({...a,fileList:b.value,onStart:P,onProgress:n,onSuccess:f,onError:E,onRemove:l}));return ft(()=>{b.value.forEach(({url:c})=>{c!=null&&c.startsWith("blob:")&&URL.revokeObjectURL(c)})}),mt(Oe,{accept:vt(a,"accept")}),r({abort:g,submit:d,clearFiles:w,handleStart:P,handleRemove:l}),(c,j)=>(y(),_("div",null,[e(h)&&c.showFileList?(y(),U(Ce,{key:0,disabled:e(i),"list-type":c.listType,files:e(b),"handle-preview":c.onPreview,onRemove:e(l)},_e({append:R(()=>[M(Fe,Ne({ref_key:"uploadRef",ref:m},e(k)),{default:R(()=>[e(t).trigger?F(c.$slots,"trigger",{key:0}):$("v-if",!0),!e(t).trigger&&e(t).default?F(c.$slots,"default",{key:1}):$("v-if",!0)]),_:3},16)]),_:2},[c.$slots.file?{name:"default",fn:R(({file:u})=>[F(c.$slots,"file",{file:u})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):$("v-if",!0),!e(h)||e(h)&&!c.showFileList?(y(),U(Fe,Ne({key:1,ref_key:"uploadRef",ref:m},e(k)),{default:R(()=>[e(t).trigger?F(c.$slots,"trigger",{key:0}):$("v-if",!0),!e(t).trigger&&e(t).default?F(c.$slots,"default",{key:1}):$("v-if",!0)]),_:3},16)):$("v-if",!0),c.$slots.trigger?F(c.$slots,"default",{key:2}):$("v-if",!0),F(c.$slots,"tip"),!e(h)&&c.showFileList?(y(),U(Ce,{key:3,disabled:e(i),"list-type":c.listType,files:e(b),"handle-preview":c.onPreview,onRemove:e(l)},_e({_:2},[c.$slots.file?{name:"default",fn:R(({file:u})=>[F(c.$slots,"file",{file:u})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):$("v-if",!0)]))}});var ks=Q(hs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const Fs=oe(ks);export{zt as E,Fs as a,Cs as b,Ps as c};
