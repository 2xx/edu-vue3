import{u as E,b as x,d as y,E as i}from"./index-005e4e09.js";import{E as k,a as I}from"./el-form-item-b063b6c6.js";import{E as S,l as B}from"./users-1a9b2b7f.js";import{E as L}from"./el-input-98fd8882.js";import{d as N,N as m,K as _,o as R,Y as q,a as t,w as l,u as a,ad as C,ae as T,af as F,Z as U}from"./runtime-core.esm-bundler-d5958d54.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./_Uint8Array-0b7ce9b1.js";import"./_initCloneObject-7bde75f9.js";const K=n=>(T("data-v-2d35490c"),n=n(),F(),n),M={class:"login"},Y=K(()=>U("h2",null,"登录",-1)),Z=N({__name:"LoginView",setup(n){const f=E(),g=x(),w=y(),s=m({phone:"18201288771",password:"111111"}),h=async()=>{var e;r.value=!0,await((e=c.value)==null?void 0:e.validate().catch(o=>{throw i.error("表单校验失败..."),r.value=!1,o}));const u=await B(s).then(o=>{if(!o.data.success)throw i.error("登录信息有误!"),r.value=!1,new Error("登录信息有误");return o.data});console.log(u),f.saveToken(u.content),r.value=!1,i.success("登录成功!"),g.push(w.query.redirect||"/")},v=m({phone:[{required:!0,message:"电话号码不能为空",trigger:"blur"},{pattern:/^1\d{10}$/,message:"手机号必须是11位数字",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:18,message:"密码长度需要6~18位",trigger:"blur"}]}),r=_(!1),c=_();return(u,e)=>{const o=L,d=k,V=S,b=I;return R(),q("div",M,[t(b,{model:a(s),rules:a(v),ref_key:"formRef",ref:c,"label-width":"120px","label-position":"top",size:"large"},{default:l(()=>[Y,t(d,{label:"手机号",prop:"phone"},{default:l(()=>[t(o,{modelValue:a(s).phone,"onUpdate:modelValue":e[0]||(e[0]=p=>a(s).phone=p)},null,8,["modelValue"])]),_:1}),t(d,{label:"密码",prop:"password"},{default:l(()=>[t(o,{modelValue:a(s).password,"onUpdate:modelValue":e[1]||(e[1]=p=>a(s).password=p)},null,8,["modelValue"])]),_:1}),t(d,null,{default:l(()=>[t(V,{type:"primary",onClick:h,loading:a(r)},{default:l(()=>[C("登录")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])}}});const P=z(Z,[["__scopeId","data-v-2d35490c"]]);export{P as default};
