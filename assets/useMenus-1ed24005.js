import{r as s}from"./users-4d3745c7.js";import{E as r,r as w}from"./index-454643d3.js";import{E}from"./el-message-box-8bd1bbf3.js";import"./el-input-c28d0f82.js";import"./el-overlay-9a593780.js";import{K as c,V as m}from"./runtime-core.esm-bundler-d5958d54.js";const h=()=>s({method:"GET",url:"/boss/menu/getAll"}),v=t=>s({method:"POST",url:"/boss/menu/saveOrUpdate",data:t}),g=t=>s({method:"DELETE",url:`/boss/menu/${t}`}),M=t=>s({method:"GET",url:"/boss/menu/getEditMenuInfo",params:{id:t}});function $(){const t=c([]),l=async()=>{const{data:e}=await h();if(e.code==="000000")t.value=e.data;else throw r.error("获取所有菜单失败.."),new Error("获取所有菜单失败")},i=m(()=>t.value.filter(e=>e.level===0)),a=c({name:"",href:"",parentId:-1,description:"",icon:"",shown:!0,orderNum:0}),d=async()=>{const{data:e}=await v(a.value);if(console.log(e),e.code==="000000")r.success(`${n.value}菜单成功!`),w.push({name:"menus"});else throw r.error(`${n.value}菜单失败!`),new Error(`${n.value}菜单失败!`)},f=async e=>{await E.confirm("确认要删除该菜单吗?","删除提醒",{confirmButtonText:"确定",cancelButtonText:"取消"}).catch(()=>(r.info("删除操作被取消!"),new Promise(()=>{})));const{data:o}=await g(e);if(o.code==="000000"&&o.data)r.success("删除菜单成功!"),l();else throw r.error("删除菜单失败!"),new Error("删除菜单失败")},p=async e=>{if(Number(e))u.value=!1;else{u.value=!0;return}const{data:o}=await M(e);if(o.code==="000000")a.value=o.data.menuInfo;else throw r.error("获取编辑菜单信息失败!"),new Error("获取编辑菜单信息失败")},u=c(!0),n=m(()=>u.value?"创建":"更新");return{allMenus:t,getAllMenus:l,topMenus:i,form:a,onSubmit:d,handleDelete:f,getMenuInfoById:p,msgText:n}}export{$ as u};
