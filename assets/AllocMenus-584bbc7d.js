import{E as r,b as g}from"./index-005e4e09.js";import{E}from"./users-1a9b2b7f.js";import{E as w}from"./el-tree-3d69684c.js";import"./el-checkbox-ded5f133.js";import{b as C,c as M}from"./roles-6ceb8b79.js";import{d as b,K as n,o as v,Y as x,a as c,u as i,w as m,F as I,ad as _}from"./runtime-core.esm-bundler-d5958d54.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-5e5920be.js";import"./index-2118f34c.js";import"./isEqual-84f5bf45.js";import"./_Uint8Array-0b7ce9b1.js";import"./flatten-96b7b984.js";const T=b({__name:"AllocMenus",props:{roleId:{type:String,required:!0}},setup(f){const s=f,h=g();console.log(s.roleId);const l=n([]),d=n([]),u=e=>{e.forEach(o=>{o.subMenuList?u(o.subMenuList):o.selected&&d.value.push(o.id)})};(async()=>{const{data:e}=await C(s.roleId);if(e.code==="000000")l.value=e.data,u(e.data);else throw r.error("获取角色菜单权限信息失败..."),new Error("获取角色菜单权限信息失败..."+e.mesg)})();const a=n(null),k=async()=>{var t;const e=(t=a.value)==null?void 0:t.getCheckedKeys(),{data:o}=await M(s.roleId,e);if(o.code==="000000"&&o.data)r.success("更新角色菜单权限成功!"),h.push({name:"roles"});else throw r.error("更新角色菜单权限失败..."),new Error("更新角色菜单权限失败..."+o.mesg)},y=()=>{var e;(e=a.value)==null||e.setCheckedKeys([])};return(e,o)=>{const t=w,p=E;return v(),x(I,null,[c(t,{ref_key:"menuTree",ref:a,data:i(l),props:{label:"name",children:"subMenuList"},"show-checkbox":"","default-expand-all":"","node-key":"id","default-checked-keys":i(d)},null,8,["data","default-checked-keys"]),c(p,{type:"primary",onClick:k},{default:m(()=>[_("保存")]),_:1}),c(p,{type:"",onClick:y},{default:m(()=>[_("清空")]),_:1})],64)}}});const G=R(T,[["__scopeId","data-v-9775f140"]]);export{G as default};
